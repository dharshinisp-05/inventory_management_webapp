<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inventory App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background: #f8fafc; color:#0f172a; }
    .navbar { background: #ffffff; border-bottom: 1px solid rgba(2,6,23,.08); }
    .card { background:#ffffff; border:1px solid rgba(2,6,23,.08); }
    .table { color:#0f172a; }
    .table thead th { color:#0f172a; border-bottom-color:#e5e7eb; }
    .table tbody tr { border-color:#eef2f7; }
    .form-control, .form-select { background:#ffffff; color:#0f172a; border-color:#e5e7eb; }
    .form-control:focus, .form-select:focus { border-color:#3b82f6; box-shadow: 0 0 0 .25rem rgba(59,130,246,.25); }
    .btn-primary { background: linear-gradient(90deg,#3b82f6,#22c55e,#f59e0b); border: none; background-size: 200% 100%; transition: background-position .3s ease, transform .15s ease; color:#0b1220; }
    .btn-primary:hover { background-position: 100% 0; transform: translateY(-1px); }
    .btn-outline-light { border-color:#94a3b8; color:#0f172a; }
    .btn-outline-light:hover { background:#f1f5f9; }
    .badge-dark { background:#0f172a; }
    a.nav-link { color:#334155 !important; }
    a.nav-link.active, a.nav-link:hover { color:#0f172a !important; }
    /* Headings light blue */
    h1, h2, h3, h4, h5, h6 { color:#2563eb; }
    .navbar-brand { color:#2563eb !important; }
    .table thead th { color:#2563eb; }
    
    .bg-bubbles { position: fixed; inset: 0; overflow: hidden; pointer-events: none; z-index: 0; }
    .bg-bubbles span { position: absolute; display: block; width: 22px; height: 22px; background: rgba(59,130,246,.12); border-radius: 8px; animation: float 18s linear infinite; box-shadow: 0 6px 16px rgba(59,130,246,.10); }
    .bg-bubbles span:nth-child(2) { width: 14px; height: 14px; background: rgba(34,197,94,.12); animation-duration: 22s; animation-delay: 2s; }
    .bg-bubbles span:nth-child(3) { width: 18px; height: 18px; background: rgba(245,158,11,.12); animation-duration: 16s; animation-delay: 4s; border-radius: 50%; }
    .bg-bubbles span:nth-child(4) { width: 12px; height: 12px; background: rgba(99,102,241,.12); animation-duration: 26s; animation-delay: 6s; }
    .bg-bubbles span:nth-child(5) { width: 28px; height: 28px; background: rgba(14,165,233,.12); animation-duration: 28s; animation-delay: 8s; border-radius: 50%; }
    @keyframes float { 0% { transform: translateY(120vh) translateX(0) rotate(0); } 100% { transform: translateY(-20vh) translateX(30vw) rotate(360deg); } }
    .fade-up { opacity:0; transform: translateY(12px); transition: opacity .6s ease, transform .6s ease; }
    .fade-up.show { opacity:1; transform: none; }
    .row-stagger > tr.fade-up { transition-duration: .7s; }
    .card.fade-up { transition-duration: .7s; }
    .hover-raise { transition: transform .2s ease, box-shadow .2s ease; }
    .hover-raise:hover { transform: translateY(-2px) scale(1.01); box-shadow: 0 8px 20px rgba(2,6,23,.08); }
    .content-wrapper { position: relative; z-index: 1; }

    .wiggle { display: inline-block; }
    .wiggle:hover { animation: wiggle .4s ease-in-out; }
    @keyframes wiggle { 0%,100%{ transform: rotate(0deg);} 25%{ transform: rotate(2deg);} 75%{ transform: rotate(-2deg);} }
    .bounce-in { animation: bounce-in .6s ease-out; }
    @keyframes bounce-in { 0%{ transform: scale(.9); opacity:0;} 60%{ transform: scale(1.03); opacity:1;} 100%{ transform: scale(1);} }
    .glow:hover { box-shadow: 0 0 0 4px rgba(37,99,235,.15); }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light mb-4">
    <div class="container">
      <a class="navbar-brand fw-bold" href="{{ url_for('index') }}"><i class="bi bi-box"></i> Inventory</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="{{ url_for('products') }}">Products</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('locations') }}">Locations</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('movements') }}">Movements</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('report') }}">Report</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="bg-bubbles">
    <span style="left:5%"></span>
    <span style="left:20%"></span>
    <span style="left:35%"></span>
    <span style="left:60%"></span>
    <span style="left:80%"></span>
  </div>
  <div class="container content-wrapper">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="position-fixed top-0 end-0 p-3" style="z-index: 11">
          {% for category, msg in messages %}
            <div class="toast align-items-center text-bg-{{ 'danger' if category=='danger' else ('success' if category=='success' else 'info') }} border-0 show mb-2" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="d-flex">
                <div class="toast-body">{{ msg }}</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const onReady = (fn) => document.readyState !== 'loading' ? fn() : document.addEventListener('DOMContentLoaded', fn);
    onReady(() => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('show'); });
      }, { threshold: 0.1 });
      document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));

      document.querySelectorAll('[data-count]')
        .forEach(el => {
          const target = parseFloat(el.getAttribute('data-count')) || 0;
          const duration = 900;
          const startTs = performance.now();
          const start = 0;
          const formatter = (n) => Number.isInteger(target) ? Math.round(n) : n.toFixed(1);
          const tick = (now) => {
            const p = Math.min(1, (now - startTs) / duration);
            const val = start + (target - start) * p;
            el.textContent = formatter(val);
            if (p < 1) requestAnimationFrame(tick);
          };
          requestAnimationFrame(tick);
        });
    });
  </script>
</body>
</html>
